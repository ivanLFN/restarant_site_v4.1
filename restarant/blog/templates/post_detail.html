{% extends 'home_blog.html' %}

{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block active %}

    <img class="img-blog-active" src="{% static post.path_to_img %}" alt="1">
    <div class="header-blog-active">{{ post.category }}: {{ post.title }}</div>

    <div class="meta-data-blog-active">
        <div class="user-blog-active">
            <img class="img-user-blog-active" src="{% static 'media/user_blog.png' %}" alt="1">
            <div class="user-name-blog-active">{{ post.author}}</div>
        </div>

        <div class="date-blog-active">
            <img class="img-date-blog-active" src="{% static 'media/calendar_blog.png' %}" alt="1">
            <div class="user-name-blog-active">{{ post.pub_date }}</div>
        </div>
    </div>

    <div class="text-blog-active">
        {{ html_content | safe }}

        <div class="end-line">_ _ _</div>
    </div>

    <div class="block-comment">

        <div class="add-comment">
            {% if user.is_authenticated %}
            <div class="header-comment">Ваш комментарий</div>
            <form class="comment-form" method="POST" action="{% url 'add_comment' post.id %}">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button class="ok-comment-btn" type="submit">ОТПРАВИТЬ</button>
            </form>
            {% else %}
            <div class="login-comment">
                <a class="login-for-comment" href="{% url 'login' %}">Войдите,</a> чтобы оставить комментарий.
            </div>
            
            {% endif %}
        </div>
        
        {% for comment in comments.reverse %}

            <div class="comment">

                <div class="meta-data-comment">
                    <img class="img-user-comment" src="{% static 'media/user_comment.png' %}" alt="1">
                    <div class="user-date-comment">
                        <div class="comment-date">{{ comment.pub_date }}</div> 
                        <div class="comment-author">{{ comment.author }}</div>
                    </div>
                </div>

                <div class="comment-text">{{ comment.text }}</div>

            </div>

            <!-- <div class="comment">
                <div class="comment-author">{{ comment.author }}</div>
                <div class="comment-date">{{ comment.pub_date }}</div>
                <div class="comment-text">{{ comment.text }}</div>
            </div> -->


        {% empty %}
            <div class="no-comments">Пока нет комментариев.</div>
        {% endfor %}
    </div>

{% endblock %}